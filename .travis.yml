language: go
sudo: false
go:
- 1.12.x
services:
- postgresl
before_install:
- go get github.com/mattn/goveralls
- go get golang.org/x/tools/cmd/cover
- psql -U postgres < schema/psql/schema_psql.sql
- sudo apt-get -y install musl-tools
os:
- linux
script:
- go build -race
- go test -v ./...
- go vet
- (echo cd lambda && echo ./update-lambda-code.sh)
env:
  global:
  - secure: tL2cNeeQ0HR7TWCVNb0okYTIjsLgkOqZEU5lS8cr198bVMExZ/i8yewrX3pifFizo3dHkYbaXXompj3jzPWlNFlgLq8RHZVnW+sO7cYWagyO33eSEOf/Rkvofes94JOnHvwYqrp5YXx+1ACxyiKm0Yzb4z8NxVTsf5ijTyAhk27P5MzLzzNxT8vFBYWvEoaYXJXxgalWh0e7Rm1gDRmiqsZ8RsuW7uq65S3Hpkjz/1whLMxoDsLsUf+19FWB2T8UAVhau9RlKE7IY7fkXuFccjBlQ0u6D+jM+mCIRfuT646/Lj/j4iA/qiwrryOrzjwdQESFD6HkV1KnE8SK2ioLI9Sekhei/Nm3HYuFBJcAQ7TSLKqX1Zbf5lVsF3wyFZ4RhntYv8U34uk5CCBtkpQS8X89F5ACIQ+GFvIzIA1IlIoDgxwtIs7HoFWeW2TeJLPSNMIbmVRyRh9KoyfgEdnPKM1vPJ8iwl+WWgAA4xEZADXJa76h+GskXVl+BkE8ThHe5/9Dc9ShOlgt8RcQtFAEBF37h1hxnROCTB9PE66JbhG5wjfpGdNxyfEikk3b+1VxRRsiMzKn4TodzMDJ9tJWxG4VlLeqUb0eLzmmapW7ygvr2xEJQE+IUPRPa/Rw0JRsgjZBUbrAUmoNUJj8vi8qidSv91Rd7mcno4hmnEwrUHs=
  - secure: D0mj5chCngXCXeZ9ZzxA4C/l/apSgJ7bvzpcP9Eh0Sj6byXw0ZaPwwux6KFInTsuw2Ru8i3iYweRlZeBmQmjFA33Es3ZkvI76gn6MNVEfm17O1Cf5VbikgRR02iJMOaLKxIlk1jfnxv0j5+IfGIUTJiavmaq1dF95pm4nVDfr4W2Po3VJZgBssPaMaKbEGlS3S4J0JLFV59/QXxE6kTme+X6pjzMhfpponQUPCTEUslywbJcDOhaJHl/JjaBh/9UqoHeEWR0T9Vvdj63RNyVOxrBxkToWuB1lhqKGbSTGcS+dTxAlPvxumwS2nqZZH3OjY2i9Y6AeT9lf1IyPJPji1f82LbLmVDy/+nk3jKPidNM1tKGDHqkT/eaw9uc5rJjmvtqAp9dBQQ3Yq1AI6dUO5wucfwY5mpCkSuqlkHinv1DcMeB8a3nZqWKIqtJZ8htvqxE0x8Ewt2XLZGUgbGYm36NPMT4Wp8aTePlY0dGKbJrh9BgL1aLjsLae5TMsDBm02SYzVDFUTSbFglMawgNM3kNISaGtQim2zcJ6dx5lehpOoIS/EKIsqcSEAg79w81+475kOstRGEv7xxV7MfKimfE3zjT5SjbvJeKKVkNEBX6/YSve5T/JP0m/2Y6p7PanHcWIKKixhl1BFFdXcuyr+bHq8lIbEDw05q3yolKWnc=
  - secure: XtInnRs/KMCRcEy1C/JYMbNDzK1ChS53ep0VOzBzXY1H8G8uAHsob1g0wPotNY4WH+wcUwGIkWm05JAPchwOVOEN74I0PKUXG0NivpIld5EueAeZ9RARoyWzBg9YSyL050S/Akk8sGUKnWqe8b6y+cwHoiSYh3wnp/K6aBapB3NNR0IwGuR5iNt1X6A6H+RGq7IphWZ/13fNwCwIY0KRisnEtDooPEKMHPXxhyeB/iwc4Pv1v5LUgsZk86YYTZHH99RdJkIhPLJIoXaRVBeurEhO+41CmDyQbvfWPC+5W2iOPz3jUHCQ+ikltTaXook+jrYylTeJuzor5q+d8P3gTt6STibfCHjOf3WMym6jpf6g0GX1d7G10Kqf4gAh4jVLLp8o/63W29A7IxQk0ZF2+oWxd/LSITWCqv6r3IDwCKEk1Z9Eapt5oMDth7/53gQV2qzDdXvNwSqbq+/s6L1v19jeD5jDXV00Hpo5sf2c7uMmZgMAtpFzlNBIecUEZP6upWdojxF0I7aEsEJbdYwhDgkKtzlvy37EqZbo3Gst6xn2OE5UVyZUhIexyCCtECo/Zi+0+WIespJFgwZZUvYwbdsOnuaiECSdpZTQylBfR/JppctcZVzaJg61EPJj/QZ9afajY8L/IDpzpgAOmglt5ZjJqDvqIZlXU1kyQdiNePI=
  - secure: OvrSTquRDGwWclzyJN6Ey+pskGQp5Ifv+11GEzMVV+j2G9wSrnXz+GM5cUcllRrKKj330k9jOwomlwqMH6anWlrx5stGHm3veW+o8gntsZkgfXHhj4KjXLNsgLdlNfGJ4RbNi6y3FMqCq4fqDJwVS928airAbjp0DWToOE+ecBe2CDRzzYo5QJlucxrj9kQlEZUij0a9Rwi46J4qfcEXR70NFcEVmnJo5Q86fwRv1+7Na098wJiUOE+wkzpaA3Nyr0A71XEOryj4CLirF2Cam5dr4CEC31jBQLBF7aLFwVWmC8ZGWfwb1qOP8hjcHDINovPeucBJ5fhvzF1wa6mEXdBepZJBPYP87FLKj7q6jjn73MDhIJWpRqF9lPj8CVafeq1V/j6A1UqTuPSqhNrbNKBlZORc2Ptu0UMVS+eyv9wpKr1+2HJMvLUMz41Rxnh3URt9XqMDSAjORHK14K0o9oXkAkrlBCb8sZVCDYwLb2UbNcqpj5ZaOQfe1RW6jCAbjtE3Or2Lj5rjF29dY4hdjmeffx0zDFvuAI76xm1E0DqI+YwZxctwx/qbY5brLVVPTHgcWIm1ECBB1+PsXMBbRUaQEXLvstdpJ6hJpaJ3W64Gy3SdKIwhLq7GDWe8/xmUXaqZciCE8jlZbVsaa+2VLpCRDWMZ6lFitApGXC0+yIg=

